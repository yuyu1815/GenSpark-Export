# EC-01 テストケース実装: 複雑なCSSアニメーション

## 概要

このドキュメントは、テストレポートの「EC-01:
複雑なCSSアニメーションを含むHTML」テストケースの実装について説明します。このテストケースは、HTML-to-Figma変換における制限事項の一つである「CSSアニメーションは静的な状態でのみ変換される」という点を検証するために作成されました。

## 実装ファイル

1. **css-animation-test.html**: 10種類の複雑なCSSアニメーションを実装したHTMLファイル
2. **animation-to-figma-test.js**: アニメーションHTMLをFigmaノードに変換し、結果を検証するJavaScriptファイル

## 実装したアニメーション

`css-animation-test.html`には、以下の10種類のCSSアニメーションが実装されています：

1. **バウンスアニメーション**: キーフレームを使用した単純なY軸方向の移動アニメーション
2. **複数プロパティアニメーション**: スケール、回転、色、境界半径を同時に変化させる複雑なアニメーション
3. **3D変形アニメーション**: perspective()を使用した3D空間での回転アニメーション
4. **複数アニメーションの組み合わせ**: 水平移動と色変化の2つのアニメーションを同時に適用
5. **CSSトランジション**: ホバー時に複数のプロパティが変化するトランジション効果
6. **パスアニメーション**: 四角形のパスに沿って移動するアニメーション
7. **テキストアニメーション**: 不透明度、位置、色が変化するテキストアニメーション
8. **グラデーションアニメーション**: 背景グラデーションの位置を変化させる流れるようなアニメーション
9. **シャドウアニメーション**: ボックスシャドウのサイズと不透明度を変化させるパルス効果
10. **スクロールアニメーション**: スクロールによってトリガーされる表示アニメーション（デモでは自動実行）

各アニメーションは、CSSの異なる機能を使用しており、HTML-to-Figma変換の制限を包括的にテストするために選ばれました。

## 使用したCSS機能

- **@keyframes**: アニメーションの各ステップを定義
- **animation**: アニメーションの適用、タイミング、繰り返し、イージングなどを制御
- **transform**: 2D/3D変形（translate、rotate、scale、perspective）
- **transition**: 状態変化時のスムーズな遷移
- **opacity**: 不透明度の変化
- **color/background-color**: 色の変化
- **border-radius**: 形状の変化
- **box-shadow**: シャドウ効果の変化
- **background-position**: グラデーション位置の変化

## 期待される結果

HTML-to-Figmaライブラリは、CSSアニメーションをサポートしていないため、以下の結果が期待されます：

1. アニメーションプロパティ（animation、transition）は変換中に失われる
2. @keyframes定義は変換されない
3. 要素は静的な状態（アニメーションの特定の時点）で変換される
4. 3D変形などの高度なCSSプロパティは完全にはサポートされない

## 検証方法

`animation-to-figma-test.js`は、変換結果を検証するために以下の項目をチェックします：

1. animationプロパティが保持されているか
2. @keyframes定義が保持されているか
3. transitionプロパティが保持されているか
4. 3D変形（perspective）が保持されているか

## 実際の結果

テストを実行すると、予想通り以下の結果が得られます：

- animationプロパティは失われる
- @keyframes定義は失われる
- transitionプロパティは失われる
- 3D変形は失われる

これは、HTML-to-Figmaライブラリの既知の制限であり、テストレポートの「EC-01: ⚠️ 制限あり」という結果と一致します。

## ブラウザでの確認方法

実際のアニメーションを確認するには、以下のコマンドでHTMLファイルをブラウザで開きます：

```bash
# Windows
start src/figma/test/css-animation-test.html

# macOS
open src/figma/test/css-animation-test.html
```

## 結論

このテストケースの実装により、HTML-to-Figma変換におけるCSSアニメーションの制限が明確に示されました。Figma自体がアニメーションをネイティブにサポートしていないため、この制限は予想されたものです。

将来的には、Figmaのプロトタイピング機能との統合や、アニメーションの静的なキーフレームとしての表現など、この制限に対処する方法を検討することが考えられます。